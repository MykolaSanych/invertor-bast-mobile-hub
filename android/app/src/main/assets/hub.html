<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>my Home</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playpen+Sans:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="hub.css">
</head>
<body>
  <div class="container">
    <header class="compact-header">
      <div class="header-row">
        <div class="header-title clickable-title" id="appHeaderTitle">my home</div>
        <div class="header-actions">
          <button class="action-btn small icon-only" id="eventsOpenBtn" type="button" aria-label="open event journal" title="event journal">
            <span class="event-icon" aria-hidden="true">EV</span>
          </button>
          <button class="action-btn small icon-only" id="logsOpenBtn" type="button" aria-label="open logs" title="saved logs">
            <span class="floppy-icon" aria-hidden="true"></span>
          </button>
          <button class="action-btn small" id="schemeOpenBtn" type="button" aria-label="open power scheme">scheme</button>
          <button class="action-btn small" id="settingsOpenBtn" type="button">settings</button>
        </div>
      </div>
      <div class="compact-subtitle">solar system | made for Chapay's house | made by Chapay</div>
    </header>

    <section class="compact-header compact-status-shell">
      <div class="compact-status-header">
        <span class="status-block">
          <span class="status-label">time</span>
          <span class="status-value" id="realTime">--:--:--</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span class="detail-label">in:</span>
          <span class="detail-value"><span id="lineVoltage">0</span> V</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span class="detail-label">pv:</span>
          <span class="detail-value"><span id="pvPowerTop">0</span> W</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span class="detail-label">grid:</span>
          <span class="detail-value"><span id="gridPowerTop">0</span> W</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span class="detail-label">load:</span>
          <span class="detail-value"><span id="loadPowerTop">0</span> W</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span class="detail-label">bat:</span>
          <span class="detail-value"><span id="batterySocTop">0</span>%</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span class="detail-label">bat pwr:</span>
          <span class="detail-value"><span id="batteryPowerTop">0</span> W</span>
        </span>
        <span class="status-divider">|</span>
        <span class="status-block">
          <span id="wifiIcon">wifi0</span>
          <span class="wifi-strength-fill" id="wifiStrengthBar"></span>
          <span class="status-value" id="wifiStrengthTop">0%</span>
        </span>
      </div>
    </section>

    <section class="climate-wide-card clickable" id="climateWideCard">
      <div class="climate-wide-header">
        <div class="climate-wide-title">climate sensors</div>
        <div class="climate-wide-sub" id="climateUpdated">updated: --:--:--</div>
      </div>
      <div class="climate-zone-list" id="climateZoneList">
        <div class="climate-zone-row">
          <span class="climate-zone-name">zone</span>
          <span class="climate-zone-values">-- C / -- % / -- hPa</span>
        </div>
      </div>
      <div class="climate-wide-foot">tap to open climate chart (inverter)</div>
    </section>

    <section class="cards-grid">
      <article class="data-card pv clickable" id="cardPv">
        <div class="card-icon">PV</div>
        <div class="card-title">solar</div>
        <div class="card-value pv-value"><span id="pvValue">0</span><span class="status-unit">W</span></div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">voltage:</span><span class="detail-value"><span id="pvVoltage">0</span> V</span></div>
          <div class="detail-row"><span class="detail-label">daily gen:</span><span class="detail-value"><span id="dailyPV">0</span> Wh</span></div>
          <div class="detail-row"><span class="detail-label">last data:</span><span class="detail-value"><span id="lastUpdatePV">--:--:--</span></span></div>
        </div>
      </article>

      <article class="data-card grid clickable" id="cardGrid">
        <div class="card-icon">GR <span class="grid-presence-badge is-absent" id="gridPresenceBadge">gr</span></div>
        <div class="card-title">grid</div>
        <div class="card-value grid-value"><span id="gridValue">0</span><span class="status-unit">W</span></div>
        <div class="card-indicators">
          <span class="mini-indicator" id="gridModeIndicator">mode: ---</span>
          <span class="mini-indicator" id="gridStateIndicator">state: ---</span>
        </div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">voltage:</span><span class="detail-value"><span id="gridVoltage">0</span> V</span></div>
          <div class="detail-row"><span class="detail-label">frequency:</span><span class="detail-value"><span id="gridFrequency">0</span> Hz</span></div>
          <div class="detail-row"><span class="detail-label">daily use:</span><span class="detail-value"><span id="dailyGrid">0</span> Wh</span></div>
        </div>
      </article>

      <article class="data-card battery clickable" id="cardBattery">
        <div class="card-icon">BAT</div>
        <div class="card-title">battery</div>
        <div class="card-value battery-value"><span id="batteryValueMain">0</span><span class="status-unit">%</span></div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">voltage:</span><span class="detail-value"><span id="batteryVoltage">0</span> V</span></div>
          <div class="detail-row"><span class="detail-label">power:</span><span class="detail-value"><span id="batteryPower">0</span> W</span></div>
          <div class="detail-row"><span class="detail-label">temperature:</span><span class="detail-value"><span id="inverterTemp">0</span> C</span></div>
        </div>
      </article>

      <article class="data-card load clickable" id="cardLoad">
        <div class="card-icon">LD</div>
        <div class="card-title">load</div>
        <div class="card-value load-value"><span id="loadValue">0</span><span class="status-unit">W</span></div>
        <div class="card-indicators">
          <span class="mini-indicator" id="loadModeIndicator">mode: ---</span>
          <span class="mini-indicator" id="loadStateIndicator">state: ---</span>
        </div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">voltage:</span><span class="detail-value"><span id="outputVoltage">0</span> V</span></div>
          <div class="detail-row"><span class="detail-label">frequency:</span><span class="detail-value"><span id="outputFrequency">0</span> Hz</span></div>
          <div class="detail-row"><span class="detail-label">daily use:</span><span class="detail-value"><span id="dailyHome">0</span> Wh</span></div>
        </div>
      </article>

      <article class="data-card boiler clickable" id="cardBoiler1">
        <div class="card-icon">B1</div>
        <div class="card-title">boiler1</div>
        <div class="card-value boiler-value"><span id="boiler1Power">0</span><span class="status-unit">W</span></div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">mode:</span><span class="detail-value" id="boiler1Mode">---</span></div>
          <div class="detail-row"><span class="detail-label">current:</span><span class="detail-value"><span id="boiler1Current">0</span> A</span></div>
          <div class="detail-row"><span class="detail-label">daily use:</span><span class="detail-value"><span id="boiler1Daily">0</span> Wh</span></div>
          <div class="detail-row"><span class="detail-label">state:</span><span class="detail-value" id="boiler1State">---</span></div>
        </div>
      </article>

      <article class="data-card pump clickable" id="cardPump">
        <div class="card-icon">P1</div>
        <div class="card-title">pump</div>
        <div class="card-value pump-value"><span id="pumpPower">0</span><span class="status-unit">W</span></div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">mode:</span><span class="detail-value" id="pumpMode">---</span></div>
          <div class="detail-row"><span class="detail-label">current:</span><span class="detail-value"><span id="pumpCurrent">0</span> A</span></div>
          <div class="detail-row"><span class="detail-label">daily use:</span><span class="detail-value"><span id="pumpDaily">0</span> Wh</span></div>
          <div class="detail-row"><span class="detail-label">state:</span><span class="detail-value" id="pumpState">---</span></div>
        </div>
      </article>

      <article class="data-card boiler clickable" id="cardBoiler2">
        <div class="card-icon">B2</div>
        <div class="card-title">boiler2</div>
        <div class="card-value boiler-value"><span id="boiler2Power">0</span><span class="status-unit">W</span></div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">mode:</span><span class="detail-value" id="boiler2Mode">---</span></div>
          <div class="detail-row"><span class="detail-label">current:</span><span class="detail-value"><span id="boiler2Current">0</span> A</span></div>
          <div class="detail-row"><span class="detail-label">daily use:</span><span class="detail-value"><span id="boiler2Daily">0</span> Wh</span></div>
          <div class="detail-row"><span class="detail-label">state:</span><span class="detail-value" id="boiler2State">---</span></div>
        </div>
      </article>

      <article class="data-card door clickable" id="cardGate">
        <div class="card-icon">DR</div>
        <div class="card-title">gate</div>
        <div class="door-action">
          <button class="door-action-btn is-stop" id="gateActionBtn" type="button" aria-label="gate action">stop</button>
        </div>
        <div class="door-times">
          <div class="door-time-row">
            <span class="door-time-label">last open</span>
            <span class="door-time-value" id="gateLastOpen">--</span>
          </div>
          <div class="door-time-row">
            <span class="door-time-label">last close</span>
            <span class="door-time-value" id="gateLastClose">--</span>
          </div>
        </div>
        <div class="card-details">
          <div class="detail-row"><span class="detail-label">state:</span><span class="detail-value" id="gateState">---</span></div>
          <div class="detail-row"><span class="detail-label">reason:</span><span class="detail-value" id="gateReason">---</span></div>
        </div>
      </article>
    </section>

    <footer class="compact-footer">
      <div class="compact-footer-info">
        <div class="compact-footer-item"><span>last update:</span><span id="lastUpdateText">--:--:--</span></div>
        <div class="compact-footer-item"><span>poll:</span><span id="pollText">5s</span></div>
      </div>
      <div class="compact-footer-modules">
        <div class="compact-footer-item"><span>inv:</span><span id="moduleInvUpdated">--:--:--</span></div>
        <div class="compact-footer-item"><span>load:</span><span id="moduleLoadUpdated">--:--:--</span></div>
        <div class="compact-footer-item"><span>garage:</span><span id="moduleGarageUpdated">--:--:--</span></div>
      </div>
      <div>solar system | made for Chapay's house | made by Chapay</div>
    </footer>
  </div>

  <div class="modal-root" id="energyModal">
    <div class="chart-overlay" data-close-modal="energyModal"></div>
    <div class="chart-box chart-modal-box">
      <div class="chart-header">
        <div class="chart-title" id="energyChartTitle">energy graph</div>
        <button class="close-graph-btn" type="button" data-close-modal="energyModal">x</button>
      </div>
      <div class="chart-toolbar">
        <div class="period-radio-group">
          <label class="period-radio"><input type="radio" name="energyPeriod" value="daily" checked>day</label>
          <label class="period-radio"><input type="radio" name="energyPeriod" value="monthly">month</label>
          <label class="period-radio"><input type="radio" name="energyPeriod" value="yearly">year</label>
        </div>
        <input id="energyDateInput" class="period-input" type="date">
        <input id="energyMonthInput" class="period-input" type="month">
        <button class="action-btn small" id="energyLoadBtn" type="button">load</button>
      </div>
      <canvas id="energyCanvas" class="graph-canvas"></canvas>
      <div class="chart-legend" id="energyLegend"></div>
    </div>
  </div>

  <div class="modal-root" id="climateModal">
    <div class="chart-overlay" data-close-modal="climateModal"></div>
    <div class="chart-box chart-modal-box">
      <div class="chart-header">
        <div class="chart-title" id="climateChartTitle">climate graph</div>
        <button class="close-graph-btn" type="button" data-close-modal="climateModal">x</button>
      </div>
      <div class="chart-toolbar">
        <div class="period-radio-group">
          <label class="period-radio"><input type="radio" name="climatePeriod" value="daily" checked>day</label>
          <label class="period-radio"><input type="radio" name="climatePeriod" value="monthly">month</label>
          <label class="period-radio"><input type="radio" name="climatePeriod" value="yearly">year</label>
        </div>
        <input id="climateDateInput" class="period-input" type="date">
        <input id="climateMonthInput" class="period-input" type="month">
        <button class="action-btn small" id="climateLoadBtn" type="button">load</button>
      </div>
      <div class="metric-toggle">
        <button class="metric-btn active" data-climate-metric="temp" type="button">temp</button>
        <button class="metric-btn" data-climate-metric="hum" type="button">hum</button>
        <button class="metric-btn" data-climate-metric="press" type="button">press</button>
      </div>
      <canvas id="climateCanvas" class="graph-canvas"></canvas>
      <div class="chart-legend" id="climateLegend"></div>
    </div>
  </div>

  <div class="modal-root" id="timelineModal">
    <div class="chart-overlay" data-close-modal="timelineModal"></div>
    <div class="chart-box chart-modal-box">
      <div class="chart-header">
        <div class="chart-title" id="timelineChartTitle">load controller timeline</div>
        <button class="close-graph-btn" type="button" data-close-modal="timelineModal">x</button>
      </div>
      <div class="chart-toolbar">
        <button class="action-btn small" id="timelineReloadBtn" type="button">reload</button>
      </div>
      <div class="timeline-panel-compact">
        <div class="timeline-header">
          <div class="timeline-title">on/off timeline</div>
          <div class="timeline-meta" id="timelineMeta">--</div>
        </div>
        <div class="timeline-canvas-wrap">
          <canvas id="loadTimelineCanvas"></canvas>
        </div>
        <div class="timeline-legend">
          <span class="legend-chip boiler">boiler</span>
          <span class="legend-chip pump">pump</span>
          <span class="legend-chip grid">grid</span>
          <span class="legend-chip pv">pv</span>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="eventModal">
    <div class="chart-overlay" data-close-modal="eventModal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title" id="eventChartTitle">event journal</div>
        <button class="close-graph-btn" type="button" data-close-modal="eventModal">x</button>
      </div>
      <div class="chart-toolbar">
        <button class="action-btn small" id="eventsReloadBtn" type="button">reload</button>
        <button class="action-btn small secondary" id="eventsClearBtn" type="button">clear</button>
      </div>
      <div class="event-list" id="eventList">
        <div class="event-item-empty">no events</div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="gridModal">
    <div class="chart-overlay" data-close-modal="gridModal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">grid control</div>
        <button class="close-graph-btn" type="button" data-close-modal="gridModal">x</button>
      </div>
      <div class="control-group">
        <div class="control-group-header">
          <div class="control-group-title">grid mode</div>
          <div class="control-group-status" id="gridModalState">---</div>
        </div>
        <div class="mode-buttons-compact">
          <button class="mode-btn-compact" id="btnGridAUTO" data-grid-mode="AUTO">AUTO</button>
          <button class="mode-btn-compact" id="btnGridOFF" data-grid-mode="OFF">OFF</button>
          <button class="mode-btn-compact" id="btnGridON" data-grid-mode="ON">ON</button>
        </div>
        <div class="reason-line">reason: <span id="gridModalReason">---</span></div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="loadModal">
    <div class="chart-overlay" data-close-modal="loadModal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">load control</div>
        <button class="close-graph-btn" type="button" data-close-modal="loadModal">x</button>
      </div>
      <div class="control-group">
        <div class="control-group-header">
          <div class="control-group-title">load mode</div>
          <div class="control-group-status" id="loadModalState">---</div>
        </div>
        <div class="mode-buttons-compact">
          <button class="mode-btn-compact" id="btnLoadAUTO" data-load-mode="AUTO">AUTO</button>
          <button class="mode-btn-compact" id="btnLoadOFF" data-load-mode="OFF">OFF</button>
          <button class="mode-btn-compact" id="btnLoadON" data-load-mode="ON">ON</button>
        </div>
        <div class="reason-line">reason: <span id="loadModalReason">---</span></div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="boiler1Modal">
    <div class="chart-overlay" data-close-modal="boiler1Modal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">boiler1 control</div>
        <button class="close-graph-btn" type="button" data-close-modal="boiler1Modal">x</button>
      </div>
      <div class="control-group">
        <div class="control-group-header">
          <div class="control-group-title">boiler1 mode</div>
          <div class="control-group-status" id="boiler1ModalState">---</div>
        </div>
        <div class="mode-buttons-compact">
          <button class="mode-btn-compact" id="btnBoiler1AUTO" data-boiler1-mode="AUTO">AUTO</button>
          <button class="mode-btn-compact" id="btnBoiler1OFF" data-boiler1-mode="OFF">OFF</button>
          <button class="mode-btn-compact" id="btnBoiler1ON" data-boiler1-mode="ON">ON</button>
        </div>
        <div class="reason-line">reason: <span id="boiler1ModalReason">---</span></div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="pumpModal">
    <div class="chart-overlay" data-close-modal="pumpModal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">pump control</div>
        <button class="close-graph-btn" type="button" data-close-modal="pumpModal">x</button>
      </div>
      <div class="control-group">
        <div class="control-group-header">
          <div class="control-group-title">pump mode</div>
          <div class="control-group-status" id="pumpModalState">---</div>
        </div>
        <div class="mode-buttons-compact">
          <button class="mode-btn-compact" id="btnPumpAUTO" data-pump-mode="AUTO">AUTO</button>
          <button class="mode-btn-compact" id="btnPumpOFF" data-pump-mode="OFF">OFF</button>
          <button class="mode-btn-compact" id="btnPumpON" data-pump-mode="ON">ON</button>
        </div>
        <div class="reason-line">reason: <span id="pumpModalReason">---</span></div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="boiler2Modal">
    <div class="chart-overlay" data-close-modal="boiler2Modal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">boiler2 control</div>
        <button class="close-graph-btn" type="button" data-close-modal="boiler2Modal">x</button>
      </div>
      <div class="control-group">
        <div class="control-group-header">
          <div class="control-group-title">boiler2 mode</div>
          <div class="control-group-status" id="boiler2ModalState">---</div>
        </div>
        <div class="mode-buttons-compact">
          <button class="mode-btn-compact" id="btnBoiler2AUTO" data-boiler2-mode="AUTO">AUTO</button>
          <button class="mode-btn-compact" id="btnBoiler2OFF" data-boiler2-mode="OFF">OFF</button>
          <button class="mode-btn-compact" id="btnBoiler2ON" data-boiler2-mode="ON">ON</button>
        </div>
        <div class="reason-line">reason: <span id="boiler2ModalReason">---</span></div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="gateModal">
    <div class="chart-overlay" data-close-modal="gateModal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">gate</div>
        <button class="close-graph-btn" type="button" data-close-modal="gateModal">x</button>
      </div>
      <div class="control-group">
        <div class="control-group-header">
          <div class="control-group-title">current state</div>
          <div class="control-group-status" id="gateModalState">---</div>
        </div>
        <div class="reason-line">reason: <span id="gateModalReason">---</span></div>
        <button class="action-btn" id="gateToggleBtn" type="button">toggle gate</button>
      </div>
    </div>
  </div>

  <div class="modal-root" id="schemeModal">
    <div class="chart-overlay" data-close-modal="schemeModal"></div>
    <div class="chart-box chart-modal-box scheme-modal-box">
      <div class="scheme-stage" id="schemeStage">
        <div class="scheme-overlay-top">
          <div class="scheme-overlay-title">power scheme</div>
          <div class="scheme-overlay-hint">swipe right to open | swipe left to close</div>
        </div>
        <button class="close-graph-btn scheme-close-btn" type="button" data-close-modal="schemeModal">x</button>
        <div class="scheme-link h scheme-chain-blue link-grid" id="schemeLinkGrid"><span class="flow"></span></div>
        <div class="scheme-link v scheme-chain-yellow link-pv" id="schemeLinkPv"><span class="flow"></span></div>
        <div class="scheme-link v scheme-chain-green link-battery" id="schemeLinkBattery"><span class="flow"></span></div>
        <div class="scheme-link h scheme-chain-red link-load" id="schemeLinkLoad"><span class="flow"></span></div>
        <div class="scheme-link v scheme-chain-red link-house-trunk" id="schemeLinkHouseTrunk"><span class="flow"></span></div>
        <div class="scheme-link h scheme-chain-red link-boiler1" id="schemeLinkBoiler1"><span class="flow"></span></div>
        <div class="scheme-link h scheme-chain-red link-pump" id="schemeLinkPump"><span class="flow"></span></div>
        <div class="scheme-link h scheme-chain-red link-boiler2" id="schemeLinkBoiler2"><span class="flow"></span></div>

        <div class="scheme-node grid-pole" id="schemeNodeGrid">
          <div class="scheme-node-title">grid</div>
          <div class="scheme-node-sub" id="schemeGridState">--</div>
        </div>
        <div class="scheme-node pv-array">
          <div class="scheme-node-title">pv</div>
          <div class="scheme-node-sub">panels</div>
        </div>
        <div class="scheme-node battery-pack">
          <div class="scheme-node-title">battery</div>
          <div class="scheme-node-sub">soc: <span id="schemeBatterySoc">--%</span></div>
        </div>
        <div class="scheme-node inverter-core">
          <div class="scheme-node-title">inverter</div>
          <div class="scheme-node-sub">in: <span id="schemeInvInput">-- V</span></div>
          <div class="scheme-node-sub">out: <span id="schemeInvOutput">-- V</span></div>
        </div>
        <div class="scheme-node house-load">
          <div class="scheme-node-title">house</div>
          <div class="scheme-node-sub">load: <span id="schemeHouseLoad">-- W</span></div>
        </div>
        <div class="scheme-node device-boiler1">
          <div class="scheme-node-title">boiler1</div>
          <div class="scheme-node-sub" id="schemeBoiler1State">--</div>
        </div>
        <div class="scheme-node device-pump">
          <div class="scheme-node-title">pump</div>
          <div class="scheme-node-sub" id="schemePumpState">--</div>
        </div>
        <div class="scheme-node device-boiler2">
          <div class="scheme-node-title">boiler2</div>
          <div class="scheme-node-sub" id="schemeBoiler2State">--</div>
        </div>

        <button class="scheme-switch switch-grid is-unknown" id="schemeSwitchGrid" type="button" data-scheme-open-modal="gridModal">
          <span class="scheme-switch-name">grid sw</span>
          <span class="scheme-switch-state">--</span>
        </button>
        <button class="scheme-switch switch-load is-unknown" id="schemeSwitchLoad" type="button" data-scheme-open-modal="loadModal">
          <span class="scheme-switch-name">load sw</span>
          <span class="scheme-switch-state">--</span>
        </button>
        <button class="scheme-switch switch-boiler1 is-unknown" id="schemeSwitchBoiler1" type="button" data-scheme-open-modal="boiler1Modal">
          <span class="scheme-switch-name">b1 sw</span>
          <span class="scheme-switch-state">--</span>
        </button>
        <button class="scheme-switch switch-pump is-unknown" id="schemeSwitchPump" type="button" data-scheme-open-modal="pumpModal">
          <span class="scheme-switch-name">p1 sw</span>
          <span class="scheme-switch-state">--</span>
        </button>
        <button class="scheme-switch switch-boiler2 is-unknown" id="schemeSwitchBoiler2" type="button" data-scheme-open-modal="boiler2Modal">
          <span class="scheme-switch-name">b2 sw</span>
          <span class="scheme-switch-state">--</span>
        </button>

        <div class="scheme-measure scheme-m-grid" id="schemeGridPower">-- W</div>
        <div class="scheme-measure scheme-m-pv" id="schemePvPower">-- W</div>
        <div class="scheme-measure scheme-m-battery" id="schemeBatteryPower">-- W</div>
        <div class="scheme-measure scheme-m-load" id="schemeLoadPower">-- W</div>
        <div class="scheme-measure scheme-m-boiler1" id="schemeBoiler1Power">-- W</div>
        <div class="scheme-measure scheme-m-pump" id="schemePumpPower">-- W</div>
        <div class="scheme-measure scheme-m-boiler2" id="schemeBoiler2Power">-- W</div>
      </div>
    </div>
  </div>

  <div class="modal-root" id="settingsModal">
    <div class="chart-overlay" data-close-modal="settingsModal"></div>
    <div class="chart-box">
      <div class="chart-header">
        <div class="chart-title">connection settings</div>
        <button class="close-graph-btn" type="button" data-close-modal="settingsModal">x</button>
      </div>
      <div class="settings-form">
        <div class="settings-group-title">modules</div>
        <label class="settings-check"><input id="cfgInverterEnabled" type="checkbox"> inverter enabled</label>
        <label class="settings-check"><input id="cfgLoadEnabled" type="checkbox"> load controller enabled</label>
        <label class="settings-check"><input id="cfgGarageEnabled" type="checkbox"> garage enabled</label>

        <div class="settings-group-title">connections</div>
        <label>Inverter URL<input id="cfgInverterUrl" type="text"></label>
        <label>Inverter Password<input id="cfgInverterPass" type="password"></label>
        <label>Load Controller URL<input id="cfgLoadUrl" type="text"></label>
        <label>Load Controller Password<input id="cfgLoadPass" type="password"></label>
        <label>Garage URL<input id="cfgGarageUrl" type="text"></label>
        <label>Garage Password<input id="cfgGaragePass" type="password"></label>
        <label>Poll Interval (2-60 sec)<input id="cfgPollSec" type="number" min="2" max="60"></label>

        <div class="settings-group-title">realtime monitor</div>
        <label class="settings-check"><input id="cfgRealtimeEnabled" type="checkbox"> realtime foreground monitoring</label>
        <label>Realtime Interval (3-60 sec)<input id="cfgRealtimeSec" type="number" min="3" max="60"></label>

        <div class="settings-group-title">notifications</div>
        <label class="settings-check"><input id="cfgNotifyPv" type="checkbox"> pv generation appeared/disappeared</label>
        <label class="settings-check"><input id="cfgNotifyGridRelay" type="checkbox"> grid turned on/off</label>
        <label class="settings-check"><input id="cfgNotifyGridPresence" type="checkbox"> grid appeared/disappeared</label>
        <label class="settings-check"><input id="cfgNotifyGridMode" type="checkbox"> grid mode changed</label>
        <label class="settings-check"><input id="cfgNotifyLoadMode" type="checkbox"> load mode changed</label>
        <label class="settings-check"><input id="cfgNotifyBoiler1" type="checkbox"> boiler1 mode changed</label>
        <label class="settings-check"><input id="cfgNotifyPump" type="checkbox"> pump mode changed</label>
        <label class="settings-check"><input id="cfgNotifyBoiler2" type="checkbox"> boiler2 mode changed</label>
        <label class="settings-check"><input id="cfgNotifyGate" type="checkbox"> gate state changed</label>

        <div class="settings-actions">
          <button class="action-btn" id="settingsSaveBtn" type="button">save</button>
          <button class="action-btn secondary" type="button" data-close-modal="settingsModal">cancel</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast-root" id="toastRoot"></div>
  <script src="hub.js"></script>
</body>
</html>
